### 相似度算法设计

相似度就是比较两个事物的相似性。一般通过计算事物的特征之间的距离，如果距离小，那么相似度大；如果距离大，那么相似度小。

问题定义：有两个对象![X,Y](https://math.jianshu.com/math?formula=X%2CY)都包含![N](https://math.jianshu.com/math?formula=N)维特征，![X = （x_1,x_2,x_3,......,x_n）,Y = (y_1,y_2,y_3,......,y_n)](https://math.jianshu.com/math?formula=X%20%3D%20%EF%BC%88x_1%2Cx_2%2Cx_3%2C......%2Cx_n%EF%BC%89%2CY%20%3D%20(y_1%2Cy_2%2Cy_3%2C......%2Cy_n))计算![X, Y](https://math.jianshu.com/math?formula=X%2C%20Y)的相似度。

本文以**欧氏距离**为例简单介绍相似度计算过程。

#### 预处理

***

1. ##### 数据映射

​	在实际场景中，往往存在多种数据类型，如文本、区间、数值、码值等，无法直接进行计算，需**将其数据映射为数值数据**（考虑归一化）。

> - 码值 ： 
>   - 值域：{0, 1}
>   - 通过码值比对，符合（可多选）则为1，不同则为0
>
> - 期限： 
>
>   - 值域：[0 , 1]
>
>   - 通过相对距离计算，步长为 (1/期限种类数)，如下所示
>
>     ​               0 ------ 2 ------ 4 ------ 6 ------ 8 ------ 10
>
>     例1         1       0.8      0.6        0.4       0.2        0     选择10为条件进行筛选
>
>     例2       0.6      0.4      0.2         0         0.2       0.4   选择6为条件进行筛选
>   
> - 文本：
> 
>  - 参考码值处理
> 
>- 数值：
>   
>   - 定值：取值即可（即$v-0$）
>   - 区间：$[min,max]$，计算$v$到区间的距离，处理成$min-v$或$v-max$

***

2. ##### 特征缩放

​	在欧氏距离计算中，**不同维度量纲不同会导致距离的计算依赖于量纲较大的特征**，因此需进行特征缩放，统一量纲。

- 归一化：将一列数据变化到某个固定区间(范围)中，比如映射到$[0, 1]$一样可以继续映射到其他范围，图像中可能会映射到$[0, 255]$，其他情况可能映射到$[-1, 1]$；

> Min_Max normalization:
>
> ![[公式]](https://www.zhihu.com/equation?tex=x%5E%7B%27%7D+%3D+%5Cfrac%7Bx-min%28x%29%7D%7Bmax%28x%29-min%28x%29%7D)
>
> Mean normalization:
>
> ![[公式]](https://www.zhihu.com/equation?tex=x%5E%7B%27%7D+%3D+%5Cfrac%7Bx-mean%28x%29%7D%7Bmax%28x%29-min%28x%29%7D+)

* 标准化：将数据变换为均值为0，标准差为1的分布，统一数据标准，提高数据可比性，削弱数据解释性; 

> Z_score normalization:
>
> <img src="https://www.zhihu.com/equation?tex=z(X)+%3D+\frac{X_i-\mu+_X}{\sigma_X}" alt="img" style="zoom:88%;" />
>
> <img src="https://www.zhihu.com/equation?tex=\sigma_X%3D\sqrt{\frac{\sum_{i%3D1}^{n}{(X_i-\mu_X)^2}}{n-1}}" alt="img" style="zoom:67%;" />
>
> Scaling to unit length:
>
> ![img](https://pic4.zhimg.com/80/v2-ca8f8c4e0c60572bc2f0ecce563f006e_720w.jpg?source=1940ef5c)



#### 相似度算法

***

​		ML中常用的相似度计算法方法包括：

> - 欧式距离（Euclidean Distance）
>- 余弦相似度（Cosine）
> - 皮尔逊相关系数（Pearson）
>- 修正余弦相似度（Adjusted Cosine）
> - 汉明距离（Hamming Distance）
>- 曼哈顿距离（Manhattan Distance）
> 

   **欧氏距离**

两个向量间的距离，取值范围为0至正无穷。如果两个向量间的距离较小，那么向量也更为相似。其计算过程如下：

>   
>
> 1. 将多种类型的数据映射为数值数据并整理为：
>
>    ​                 													
>
> $$
> X = (X_1,X_2,X_3,...,X_5)
> $$
>
> $$
> Y = (Y_1, Y_2, Y_3, ..., Y_5)
> $$
>
> 
>
> 2. 进行特征缩放：
>
> ​         采用归一化或标准化处理各维度数据，见特征缩放
>
> 3. 计算加权欧氏距离：
>
> ​               
> $$
> Distance_(X,Y) = \sqrt{\sum_{i=1}^n (X`_i-Y`_i)^2*Z_i}
> $$
> ​		其中
> $$
> Z = [a_1,a_2,a_3,a_4,a_5]
> $$
> 
>
> 5. 将欧氏距离映射为相似度(0-100)%
>
>    ​	同特征缩放（采用归一化则此步可省）



采用Java实现，需要可留言。



参考：

http://blog.sina.com.cn/s/blog_62b83291010127bf.html

https://www.cnblogs.com/chenxiangzhen/p/10648503.html

https://zhuanlan.zhihu.com/p/85832270

​                